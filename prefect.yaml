name: daily-main-pipeline
prefect-version: ">=3.0.0"

# Runtime steps executed on Prefect's managed infra each run
pull:
  - prefect.deployments.steps.git_clone:
      repository: "https://github.com/allyz1/Datboard_prefect.git"
      branch: "main"
      # use an env var token so you don't hardcode secrets
      access_token: "{{ env.GITHUB_PAT }}"
  - prefect.deployments.steps.pip_install_requirements:
      requirements_file: "requirements.txt"

deployments:
  - name: daily
    flow_name: daily-main-pipeline
    entrypoint: "flows/daily_main_flow.py:daily_main_pipeline"
    work_pool:
      name: "managed-pool"
    schedule:
      cron: "0 6 * * *"
      timezone: "America/Los_Angeles"
